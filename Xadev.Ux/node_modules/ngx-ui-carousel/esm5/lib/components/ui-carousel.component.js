/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Output, EventEmitter, Input, ContentChildren, QueryList, ElementRef, HostListener, Renderer2 } from '@angular/core';
import { UiCarouselItemComponent } from './ui-carousel-item.component';
import { UiCarouselColorConfig } from '../color-config.class';
var UiCarouselComponent = /** @class */ (function () {
    function UiCarouselComponent(el, renderer2) {
        this.el = el;
        this.renderer2 = renderer2;
        this.width = '100%';
        this.autoPlay = true;
        this.infinite = true;
        this.fade = false;
        this.isDotsVisible = true;
        this.isArrowsVisible = true;
        this.isPrintButtonVisible = false;
        this.colorConfig = new UiCarouselColorConfig();
        this.onChange = new EventEmitter();
        this.printRequest = new EventEmitter();
        this.currentItemIndex = 0;
    }
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.speed = this.speed || 500;
        this.autoPlaySpeed = this.autoPlaySpeed || 1500;
        if (this.autoPlay) {
            this.autoPlayFunction(true);
        }
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.height) {
            /** @type {?} */
            var highest_1 = 0;
            this.items.forEach((/**
             * @param {?} itemELement
             * @return {?}
             */
            function (itemELement) {
                if (itemELement.el.nativeElement.offsetHeight > highest_1) {
                    highest_1 = itemELement.el.nativeElement.offsetHeight;
                }
            }));
            this.height = highest_1 + "px";
        }
        else {
            this.items.forEach((/**
             * @param {?} itemELement
             * @return {?}
             */
            function (itemELement) {
                itemELement.el.nativeElement.style.overflowY = 'auto';
            }));
        }
        this.items.forEach((/**
         * @param {?} itemELement
         * @return {?}
         */
        function (itemELement) {
            itemELement.el.nativeElement.style.height = _this.height;
        }));
        this.el.nativeElement.style.height = this.height;
        this.el.nativeElement.style.width = this.width;
        if (this.items && this.items.length > 0) {
            this.onChange.emit(0);
            this._width = this.items.first.el.nativeElement.offsetWidth;
        }
        this.firstItemIndex = 0;
        this.lastItemIndex = this.items.length - 1;
        if (!this.fade) {
            this.items.toArray().forEach((/**
             * @param {?} item
             * @param {?} itemIndex
             * @return {?}
             */
            function (item, itemIndex) {
                item.speed = _this.speed;
                item.position = _this._width * itemIndex;
                item.currentPosition = item.position;
                item.disableTransition();
                item.moveTo(item.position);
            }));
        }
        else {
            this.items.forEach((/**
             * @param {?} item
             * @param {?} index
             * @return {?}
             */
            function (item, index) {
                item.zIndex = _this.items.length - index;
                item.setzIndex(item.zIndex);
            }));
        }
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.items.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                item.colorConfig = _this.colorConfig;
            }));
        }), 50);
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.onPrintClick = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var currentEl = this.items.toArray()[this.currentItemIndex].el;
        this.printRequest.emit(currentEl);
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.next = /**
     * @return {?}
     */
    function () {
        this.slideRight();
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.prev = /**
     * @return {?}
     */
    function () {
        this.slideLeft();
    };
    /**
     * @param {?} index
     * @return {?}
     */
    UiCarouselComponent.prototype.goTo = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        if (!this.fade) {
            this.slideTo(index);
        }
        else {
            this.fadeTo(index);
        }
    };
    /**
     * @param {?} index
     * @return {?}
     */
    UiCarouselComponent.prototype.rotateRightTo = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        while (index !== this.lastItemIndex) {
            this.rotateRight();
        }
    };
    /**
     * @param {?} index
     * @return {?}
     */
    UiCarouselComponent.prototype.rotateLeftTo = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        while (index !== this.firstItemIndex) {
            this.rotateLeft();
        }
    };
    /**
     * @param {?} index
     * @return {?}
     */
    UiCarouselComponent.prototype.slideTo = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        var _this = this;
        this.onChange.emit((index + this.items.length) % this.items.length);
        /** @type {?} */
        var steps = this.currentItemIndex - index;
        if (this.infinite) {
            if (steps > 0) {
                this.rotateRightTo(this.currentItemIndex);
            }
            else if (steps < 0) {
                this.rotateLeftTo(this.currentItemIndex);
            }
        }
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.enableTransition();
            _this.items.forEach((/**
             * @param {?} item
             * @param {?} i
             * @return {?}
             */
            function (item, i) {
                item.position += _this._width * (steps);
                item.currentPosition = item.position;
                item.moveTo(item.position);
            }));
            _this.currentItemIndex = (index + _this.items.length) % _this.items.length;
        }), 50);
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.slideLeft = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.isSliding) {
            this.isSliding = true;
            if (!this.infinite) {
                if (this.currentItemIndex === 0) {
                    this.slideToPrevPosition();
                    return;
                }
            }
            this.slideTo(this.currentItemIndex - 1);
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.isSliding = false;
            }), this.speed);
        }
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.slideRight = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (!this.isSliding) {
            this.isSliding = true;
            if (!this.infinite) {
                if (this.currentItemIndex === this.items.length - 1) {
                    this.slideToPrevPosition();
                    return;
                }
            }
            this.slideTo(this.currentItemIndex + 1);
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.isSliding = false;
            }), this.speed);
        }
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.slideToPrevPosition = /**
     * @return {?}
     */
    function () {
        this.enableTransition();
        this.items.forEach((/**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            item.currentPosition = item.position;
            item.moveTo(item.position);
        }));
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.disableTransition = /**
     * @return {?}
     */
    function () {
        this.items.forEach((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            item.disableTransition();
        }));
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.enableTransition = /**
     * @return {?}
     */
    function () {
        this.items.forEach((/**
         * @param {?} item
         * @param {?} index
         * @return {?}
         */
        function (item, index) {
            item.enableTransition();
        }));
    };
    /**
     * @param {?} index
     * @return {?}
     */
    UiCarouselComponent.prototype.getItemByIndex = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        return this.items.find((/**
         * @param {?} item
         * @param {?} i
         * @return {?}
         */
        function (item, i) {
            return i === index;
        }));
    };
    /**
     * @param {?} item
     * @return {?}
     */
    UiCarouselComponent.prototype.getIndexByItem = /**
     * @param {?} item
     * @return {?}
     */
    function (item) {
        return this.items.toArray().indexOf(item);
    };
    /**
     * @param {?} n
     * @return {?}
     */
    UiCarouselComponent.prototype.rotateRightNTimes = /**
     * @param {?} n
     * @return {?}
     */
    function (n) {
        for (var i = 0; i < n; i++) {
            this.rotateRight();
        }
    };
    /**
     * @param {?} n
     * @return {?}
     */
    UiCarouselComponent.prototype.rotateLeftNTimes = /**
     * @param {?} n
     * @return {?}
     */
    function (n) {
        for (var i = 0; i < n; i++) {
            this.rotateLeft();
        }
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.rotateRight = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var firstItemRef = this.getItemByIndex(this.firstItemIndex);
        /** @type {?} */
        var lastItemRef = this.getItemByIndex(this.lastItemIndex);
        if (!this.fade) {
            lastItemRef.position = firstItemRef.position - this._width;
            lastItemRef.currentPosition = lastItemRef.position;
            lastItemRef.disableTransition();
            lastItemRef.moveTo(lastItemRef.position);
            this.firstItemIndex = this.lastItemIndex;
            this.lastItemIndex = (this.lastItemIndex - 1 + this.items.length) % this.items.length;
        }
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.rotateLeft = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var firstItemRef = this.getItemByIndex(this.firstItemIndex);
        /** @type {?} */
        var lastItemRef = this.getItemByIndex(this.lastItemIndex);
        firstItemRef.position = lastItemRef.position + this._width;
        firstItemRef.currentPosition = firstItemRef.position;
        firstItemRef.disableTransition();
        firstItemRef.moveTo(firstItemRef.position);
        this.lastItemIndex = this.firstItemIndex;
        this.firstItemIndex = (this.lastItemIndex + 1) % this.items.length;
    };
    /**
     * @param {?} index
     * @return {?}
     */
    UiCarouselComponent.prototype.fadeTo = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        this.onChange.emit(index);
        /** @type {?} */
        var firstItem = this.getItemByIndex(this.currentItemIndex);
        /** @type {?} */
        var targetItem = this.getItemByIndex(index);
        /** @type {?} */
        var highestZIndex = this.items.length;
        targetItem.zIndex = firstItem.zIndex + 1;
        targetItem.setzIndex(targetItem.zIndex);
        targetItem.disableTransition();
        targetItem.fadeIn(this.speed);
        this.currentItemIndex = index;
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.fadeRight = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var newIndex = (this.currentItemIndex + 1) % this.items.length;
        this.fadeTo(newIndex);
        this.currentItemIndex = newIndex;
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.fadeLeft = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var newIndex = (this.currentItemIndex - 1 + this.items.length) % this.items.length;
        this.fadeTo(newIndex);
        this.currentItemIndex = newIndex;
    };
    // is item first visually and not necessary first in the dom (QueryList)
    // is item first visually and not necessary first in the dom (QueryList)
    /**
     * @param {?} index
     * @return {?}
     */
    UiCarouselComponent.prototype.isItemFirst = 
    // is item first visually and not necessary first in the dom (QueryList)
    /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        return this.firstItemIndex === index;
    };
    // is item last visually and not necessary last in the dom (QueryList)
    // is item last visually and not necessary last in the dom (QueryList)
    /**
     * @param {?} index
     * @return {?}
     */
    UiCarouselComponent.prototype.isItemLast = 
    // is item last visually and not necessary last in the dom (QueryList)
    /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        return this.lastItemIndex === index;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    UiCarouselComponent.prototype.onResize = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.rePosition();
    };
    /**
     * @return {?}
     */
    UiCarouselComponent.prototype.rePosition = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var items = this.items.toArray();
        if (this.items && this.items.length > 0) {
            this._width = this.items.first.el.nativeElement.offsetWidth;
        }
        items.sort((/**
         * @param {?} item1
         * @param {?} item2
         * @return {?}
         */
        function (item1, item2) {
            if (item1.position > item2.position) {
                return 1;
            }
            else if (item1.position < item2.position) {
                return -1;
            }
            else {
                return 0;
            }
        }));
        /** @type {?} */
        var currentItem = this.getItemByIndex(this.currentItemIndex);
        /** @type {?} */
        var currentItemIndex = items.indexOf(currentItem);
        for (var i = currentItemIndex; i < items.length + currentItemIndex; i++) {
            /** @type {?} */
            var item = items[(i + items.length) % items.length];
            item.position = ((i + items.length) % items.length - currentItemIndex) * this._width;
            item.disableTransition();
            item.moveTo(item.position);
        }
    };
    /**
     * @param {?} shouldAutoPlay
     * @return {?}
     */
    UiCarouselComponent.prototype.autoPlayFunction = /**
     * @param {?} shouldAutoPlay
     * @return {?}
     */
    function (shouldAutoPlay) {
        var _this = this;
        if (this.autoPlay) {
            if (shouldAutoPlay) {
                this.interval = setInterval((/**
                 * @return {?}
                 */
                function () {
                    _this.next();
                }), this.autoPlaySpeed);
            }
            else {
                clearInterval(this.interval);
            }
        }
    };
    UiCarouselComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line:component-selector
                    selector: 'ngx-ui-carousel',
                    template: "\n    <div (mouseenter)=\"(autoPlay)?autoPlayFunction(false):null\" (mouseleave)=\"(autoPlay)?autoPlayFunction(true):null\">\n      <ng-content></ng-content>\n      <dots\n        *ngIf=\"isDotsVisible && items.length > 1\"\n        [dotsCount]=\"items.length\"\n        position=\"middle\"\n        [activeDot]=\"currentItemIndex\"\n        [colorConfig]=\"colorConfig\"\n        (onClick)=\"goTo($event)\"></dots>\n      <arrow *ngIf=\"isArrowsVisible && items.length > 1\" dir=\"left\" (onArrowClick)=\"prev()\" [disabled]=\"false\" [colorConfig]=\"colorConfig\"></arrow>\n      <arrow *ngIf=\"isArrowsVisible && items.length > 1\" dir=\"right\" (onArrowClick)=\"next()\" [disabled]=\"false\" [colorConfig]=\"colorConfig\"></arrow>\n      <print-button\n        *ngIf=\"isPrintButtonVisible\"\n        (onButtonClick)=\"onPrintClick()\"\n        [colorConfig]=\"colorConfig\"\n        [disabled]=\"false\"></print-button>\n    </div>\n  ",
                    styles: ["\n    :host {\n      display: block;\n      overflow: hidden;\n      position: relative;\n    }\n  "]
                }] }
    ];
    /** @nocollapse */
    UiCarouselComponent.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 }
    ]; };
    UiCarouselComponent.propDecorators = {
        height: [{ type: Input }],
        width: [{ type: Input }],
        speed: [{ type: Input }],
        autoPlay: [{ type: Input }],
        autoPlaySpeed: [{ type: Input }],
        infinite: [{ type: Input }],
        fade: [{ type: Input }],
        isDotsVisible: [{ type: Input }],
        isArrowsVisible: [{ type: Input }],
        isPrintButtonVisible: [{ type: Input }],
        colorConfig: [{ type: Input }],
        onChange: [{ type: Output }],
        printRequest: [{ type: Output }],
        items: [{ type: ContentChildren, args: [UiCarouselItemComponent,] }],
        onResize: [{ type: HostListener, args: ['window:resize', ['$event'],] }]
    };
    return UiCarouselComponent;
}());
export { UiCarouselComponent };
if (false) {
    /** @type {?} */
    UiCarouselComponent.prototype.height;
    /** @type {?} */
    UiCarouselComponent.prototype.width;
    /** @type {?} */
    UiCarouselComponent.prototype.speed;
    /** @type {?} */
    UiCarouselComponent.prototype.autoPlay;
    /** @type {?} */
    UiCarouselComponent.prototype.autoPlaySpeed;
    /** @type {?} */
    UiCarouselComponent.prototype.infinite;
    /** @type {?} */
    UiCarouselComponent.prototype.fade;
    /** @type {?} */
    UiCarouselComponent.prototype.isDotsVisible;
    /** @type {?} */
    UiCarouselComponent.prototype.isArrowsVisible;
    /** @type {?} */
    UiCarouselComponent.prototype.isPrintButtonVisible;
    /** @type {?} */
    UiCarouselComponent.prototype.colorConfig;
    /** @type {?} */
    UiCarouselComponent.prototype.onChange;
    /** @type {?} */
    UiCarouselComponent.prototype.printRequest;
    /** @type {?} */
    UiCarouselComponent.prototype.items;
    /** @type {?} */
    UiCarouselComponent.prototype.currentItemIndex;
    /** @type {?} */
    UiCarouselComponent.prototype.interval;
    /**
     * @type {?}
     * @private
     */
    UiCarouselComponent.prototype._width;
    /**
     * @type {?}
     * @private
     */
    UiCarouselComponent.prototype.firstItemIndex;
    /**
     * @type {?}
     * @private
     */
    UiCarouselComponent.prototype.lastItemIndex;
    /**
     * @type {?}
     * @private
     */
    UiCarouselComponent.prototype.isSliding;
    /**
     * @type {?}
     * @private
     */
    UiCarouselComponent.prototype.el;
    /**
     * @type {?}
     * @private
     */
    UiCarouselComponent.prototype.renderer2;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidWktY2Fyb3VzZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXVpLWNhcm91c2VsLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvdWktY2Fyb3VzZWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUFVLE1BQU0sRUFBRSxZQUFZLEVBQ3ZDLEtBQUssRUFBRSxlQUFlLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFDN0MsWUFBWSxFQUFpQixTQUFTLEVBQ3ZDLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBRTlEO0lBd0RFLDZCQUFvQixFQUFjLEVBQVUsU0FBb0I7UUFBNUMsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUFVLGNBQVMsR0FBVCxTQUFTLENBQVc7UUF4QnZELFVBQUssR0FBRyxNQUFNLENBQUM7UUFFZixhQUFRLEdBQUcsSUFBSSxDQUFDO1FBRWhCLGFBQVEsR0FBRyxJQUFJLENBQUM7UUFDaEIsU0FBSSxHQUFHLEtBQUssQ0FBQztRQUNiLGtCQUFhLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLG9CQUFlLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLHlCQUFvQixHQUFHLEtBQUssQ0FBQztRQUM3QixnQkFBVyxHQUFHLElBQUkscUJBQXFCLEVBQUUsQ0FBQztRQUV6QyxhQUFRLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFDdEQsaUJBQVksR0FBc0IsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUk3RCxxQkFBZ0IsR0FBRyxDQUFDLENBQUM7SUFRd0MsQ0FBQzs7OztJQUVyRSxzQ0FBUTs7O0lBQVI7UUFDRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLElBQUksR0FBRyxDQUFDO1FBQy9CLElBQUksQ0FBQyxhQUFh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Q0Y7SUFDSCxDQUFDOztnQkF4VkYsU0FBUyxTQUFDOztvQkFFVCxRQUFRLEVBQUUsaUJBQWlCO29CQUMzQixRQUFRLEVBQUUsODZCQWtCVDs2QkFDUSxxR0FNUjtpQkFDRjs7OztnQkFuQ29DLFVBQVU7Z0JBQ2hCLFNBQVM7Ozt5QkFvQ3JDLEtBQUs7d0JBQ0wsS0FBSzt3QkFDTCxLQUFLOzJCQUNMLEtBQUs7Z0NBQ0wsS0FBSzsyQkFDTCxLQUFLO3VCQUNMLEtBQUs7Z0NBQ0wsS0FBSztrQ0FDTCxLQUFLO3VDQUNMLEtBQUs7OEJBQ0wsS0FBSzsyQkFFTCxNQUFNOytCQUNOLE1BQU07d0JBRU4sZUFBZSxTQUFDLHVCQUF1QjsyQkFnUXZDLFlBQVksU0FBQyxlQUFlLEVBQUUsQ0FBQyxRQUFRLENBQUM7O0lBMkMzQywwQkFBQztDQUFBLEFBelZELElBeVZDO1NBM1RZLG1CQUFtQjs7O0lBQzlCLHFDQUF3Qjs7SUFDeEIsb0NBQXdCOztJQUN4QixvQ0FBdUI7O0lBQ3ZCLHVDQUF5Qjs7SUFDekIsNENBQStCOztJQUMvQix1Q0FBeUI7O0lBQ3pCLG1DQUFzQjs7SUFDdEIsNENBQThCOztJQUM5Qiw4Q0FBZ0M7O0lBQ2hDLG1EQUFzQzs7SUFDdEMsMENBQW1EOztJQUVuRCx1Q0FBZ0U7O0lBQ2hFLDJDQUFvRTs7SUFFcEUsb0NBQW9GOztJQUVwRiwrQ0FBNEI7O0lBQzVCLHVDQUFxQjs7Ozs7SUFFckIscUNBQXVCOzs7OztJQUN2Qiw2Q0FBK0I7Ozs7O0lBQy9CLDRDQUE4Qjs7Ozs7SUFDOUIsd0NBQTJCOzs7OztJQUVmLGlDQUFzQjs7Ozs7SUFBRSx3Q0FBNEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbXBvbmVudCwgT25Jbml0LCBPdXRwdXQsIEV2ZW50RW1pdHRlcixcclxuICBJbnB1dCwgQ29udGVudENoaWxkcmVuLCBRdWVyeUxpc3QsIEVsZW1lbnRSZWYsXHJcbiAgSG9zdExpc3RlbmVyLCBBZnRlclZpZXdJbml0LCBSZW5kZXJlcjJcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVWlDYXJvdXNlbEl0ZW1Db21wb25lbnQgfSBmcm9tICcuL3VpLWNhcm91c2VsLWl0ZW0uY29tcG9uZW50JztcclxuaW1wb3J0IHsgVWlDYXJvdXNlbENvbG9yQ29uZmlnIH0gZnJvbSAnLi4vY29sb3ItY29uZmlnLmNsYXNzJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21wb25lbnQtc2VsZWN0b3JcclxuICBzZWxlY3RvcjogJ25neC11aS1jYXJvdXNlbCcsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxkaXYgKG1vdXNlZW50ZXIpPVwiKGF1dG9QbGF5KT9hdXRvUGxheUZ1bmN0aW9uKGZhbHNlKTpudWxsXCIgKG1vdXNlbGVhdmUpPVwiKGF1dG9QbGF5KT9hdXRvUGxheUZ1bmN0aW9uKHRydWUpOm51bGxcIj5cclxuICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxyXG4gICAgICA8ZG90c1xyXG4gICAgICAgICpuZ0lmPVwiaXNEb3RzVmlzaWJsZSAmJiBpdGVtcy5sZW5ndGggPiAxXCJcclxuICAgICAgICBbZG90c0NvdW50XT1cIml0ZW1zLmxlbmd0aFwiXHJcbiAgICAgICAgcG9zaXRpb249XCJtaWRkbGVcIlxyXG4gICAgICAgIFthY3RpdmVEb3RdPVwiY3VycmVudEl0ZW1JbmRleFwiXHJcbiAgICAgICAgW2NvbG9yQ29uZmlnXT1cImNvbG9yQ29uZmlnXCJcclxuICAgICAgICAob25DbGljayk9XCJnb1RvKCRldmVudClcIj48L2RvdHM+XHJcbiAgICAgIDxhcnJvdyAqbmdJZj1cImlzQXJyb3dzVmlzaWJsZSAmJiBpdGVtcy5sZW5ndGggPiAxXCIgZGlyPVwibGVmdFwiIChvbkFycm93Q2xpY2spPVwicHJldigpXCIgW2Rpc2FibGVkXT1cImZhbHNlXCIgW2NvbG9yQ29uZmlnXT1cImNvbG9yQ29uZmlnXCI+PC9hcnJvdz5cclxuICAgICAgPGFycm93ICpuZ0lmPVwiaXNBcnJvd3NWaXNpYmxlICYmIGl0ZW1zLmxlbmd0aCA+IDFcIiBkaXI9XCJyaWdodFwiIChvbkFycm93Q2xpY2spPVwibmV4dCgpXCIgW2Rpc2FibGVkXT1cImZhbHNlXCIgW2NvbG9yQ29uZmlnXT1cImNvbG9yQ29uZmlnXCI+PC9hcnJvdz5cclxuICAgICAgPHByaW50LWJ1dHRvblxyXG4gICAgICAgICpuZ0lmPVwiaXNQcmludEJ1dHRvblZpc2libGVcIlxyXG4gICAgICAgIChvbkJ1dHRvbkNsaWNrKT1cIm9uUHJpbnRDbGljaygpXCJcclxuICAgICAgICBbY29sb3JDb25maWddPVwiY29sb3JDb25maWdcIlxyXG4gICAgICAgIFtkaXNhYmxlZF09XCJmYWxzZVwiPjwvcHJpbnQtYnV0dG9uPlxyXG4gICAgPC9kaXY+XHJcbiAgYCxcclxuICBzdHlsZXM6IFtgXHJcbiAgICA6aG9zdCB7XHJcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICB9XHJcbiAgYF0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBVaUNhcm91c2VsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuICBASW5wdXQoKSBoZWlnaHQ6IHN0cmluZztcclxuICBASW5wdXQoKSB3aWR0aCA9ICcxMDAlJztcclxuICBASW5wdXQoKSBzcGVlZDogbnVtYmVyO1xyXG4gIEBJbnB1dCgpIGF1dG9QbGF5ID0gdHJ1ZTtcclxuICBASW5wdXQoKSBhdXRvUGxheVNwZWVkOiBudW1iZXI7XHJcbiAgQElucHV0KCkgaW5maW5pdGUgPSB0cnVlO1xyXG4gIEBJbnB1dCgpIGZhZGUgPSBmYWxzZTtcclxuICBASW5wdXQoKSBpc0RvdHNWaXNpYmxlID0gdHJ1ZTtcclxuICBASW5wdXQoKSBpc0Fycm93c1Zpc2libGUgPSB0cnVlO1xyXG4gIEBJbnB1dCgpIGlzUHJpbnRCdXR0b25WaXNpYmxlID0gZmFsc2U7XHJcbiAgQElucHV0KCkgY29sb3JDb25maWcgPSBuZXcgVWlDYXJvdXNlbENvbG9yQ29uZmlnKCk7XHJcblxyXG4gIEBPdXRwdXQoKSBvbkNoYW5nZTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICBAT3V0cHV0KCkgcHJpbnRSZXF1ZXN0OiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICBAQ29udGVudENoaWxkcmVuKFVpQ2Fyb3VzZWxJdGVtQ29tcG9uZW50KSBpdGVtczogUXVlcnlMaXN0PFVpQ2Fyb3VzZWxJdGVtQ29tcG9uZW50PjtcclxuXHJcbiAgcHVibGljIGN1cnJlbnRJdGVtSW5kZXggPSAwO1xyXG4gIHB1YmxpYyBpbnRlcnZhbDogYW55O1xyXG5cclxuICBwcml2YXRlIF93aWR0aDogbnVtYmVyO1xyXG4gIHByaXZhdGUgZmlyc3RJdGVtSW5kZXg6IG51bWJlcjsgLy8gdGhlIHZpc3VhbCBpbmRleCBvZiBpdGVtIGFuZCBub3QgbmVjZXNzYXJ5IHRoZSBpbmRleCBpbiB0aGUgRE9NXHJcbiAgcHJpdmF0ZSBsYXN0SXRlbUluZGV4OiBudW1iZXI7IC8vIC4uXHJcbiAgcHJpdmF0ZSBpc1NsaWRpbmc6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsIHByaXZhdGUgcmVuZGVyZXIyOiBSZW5kZXJlcjIpIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuc3BlZWQgPSB0aGlzLnNwZWVkIHx8IDUwMDtcclxuICAgIHRoaXMuYXV0b1BsYXlTcGVlZCA9IHRoaXMuYXV0b1BsYXlTcGVlZCB8fCAxNTAwO1xyXG4gICAgaWYgKHRoaXMuYXV0b1BsYXkpIHtcclxuICAgICAgdGhpcy5hdXRvUGxheUZ1bmN0aW9uKHRydWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCkge1xyXG4gICAgaWYgKCF0aGlzLmhlaWdodCkge1xyXG4gICAgICBsZXQgaGlnaGVzdCA9IDA7XHJcbiAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtRUxlbWVudCA9PiB7XHJcbiAgICAgICAgaWYgKGl0ZW1FTGVtZW50LmVsLm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0ID4gaGlnaGVzdCkge1xyXG4gICAgICAgICAgaGlnaGVzdCA9IGl0ZW1FTGVtZW50LmVsLm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLmhlaWdodCA9IGAke2hpZ2hlc3R9cHhgO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW1FTGVtZW50ID0+IHtcclxuICAgICAgICBpdGVtRUxlbWVudC5lbC5uYXRpdmVFbGVtZW50LnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJztcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW1FTGVtZW50ID0+IHtcclxuICAgICAgaXRlbUVMZW1lbnQuZWwubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuZWwubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuICAgIHRoaXMuZWwubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGg7XHJcbiAgICBpZiAodGhpcy5pdGVtcyAmJiB0aGlzLml0ZW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5vbkNoYW5nZS5lbWl0KDApO1xyXG4gICAgICB0aGlzLl93aWR0aCA9IHRoaXMuaXRlbXMuZmlyc3QuZWwubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgIH1cclxuICAgIHRoaXMuZmlyc3RJdGVtSW5kZXggPSAwO1xyXG4gICAgdGhpcy5sYXN0SXRlbUluZGV4ID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxO1xyXG4gICAgaWYgKCF0aGlzLmZhZGUpIHtcclxuICAgICAgdGhpcy5pdGVtcy50b0FycmF5KCkuZm9yRWFjaCgoaXRlbSwgaXRlbUluZGV4KSA9PiB7XHJcbiAgICAgICAgaXRlbS5zcGVlZCA9IHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgaXRlbS5wb3NpdGlvbiA9IHRoaXMuX3dpZHRoICogaXRlbUluZGV4O1xyXG4gICAgICAgIGl0ZW0uY3VycmVudFBvc2l0aW9uID0gaXRlbS5wb3NpdGlvbjtcclxuICAgICAgICBpdGVtLmRpc2FibGVUcmFuc2l0aW9uKCk7XHJcbiAgICAgICAgaXRlbS5tb3ZlVG8oaXRlbS5wb3NpdGlvbik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIGl0ZW0uekluZGV4ID0gdGhpcy5pdGVtcy5sZW5ndGggLSBpbmRleDtcclxuICAgICAgICBpdGVtLnNldHpJbmRleChpdGVtLnpJbmRleCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBpdGVtLmNvbG9yQ29uZmlnID0gdGhpcy5jb2xvckNvbmZpZztcclxuICAgICAgfSk7XHJcbiAgICB9LCA1MCk7XHJcbiAgfVxyXG5cclxuICBvblByaW50Q2xpY2soKSB7XHJcbiAgICBjb25zdCBjdXJyZW50RWwgPSB0aGlzLml0ZW1zLnRvQXJyYXkoKVt0aGlzLmN1cnJlbnRJdGVtSW5kZXhdLmVsO1xyXG4gICAgdGhpcy5wcmludFJlcXVlc3QuZW1pdChjdXJyZW50RWwpO1xyXG4gIH1cclxuXHJcbiAgbmV4dCgpIHtcclxuICAgIHRoaXMuc2xpZGVSaWdodCgpO1xyXG4gIH1cclxuXHJcbiAgcHJldigpIHtcclxuICAgIHRoaXMuc2xpZGVMZWZ0KCk7XHJcbiAgfVxyXG5cclxuICBnb1RvKGluZGV4OiBudW1iZXIpIHtcclxuICAgIGlmICghdGhpcy5mYWRlKSB7XHJcbiAgICAgIHRoaXMuc2xpZGVUbyhpbmRleCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmZhZGVUbyhpbmRleCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByb3RhdGVSaWdodFRvKGluZGV4OiBudW1iZXIpIHtcclxuICAgIHdoaWxlIChpbmRleCAhPT0gdGhpcy5sYXN0SXRlbUluZGV4KSB7XHJcbiAgICAgIHRoaXMucm90YXRlUmlnaHQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJvdGF0ZUxlZnRUbyhpbmRleDogbnVtYmVyKSB7XHJcbiAgICB3aGlsZSAoaW5kZXggIT09IHRoaXMuZmlyc3RJdGVtSW5kZXgpIHtcclxuICAgICAgdGhpcy5yb3RhdGVMZWZ0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzbGlkZVRvKGluZGV4OiBudW1iZXIpIHtcclxuICAgIHRoaXMub25DaGFuZ2UuZW1pdCgoaW5kZXggKyB0aGlzLml0ZW1zLmxlbmd0aCkgJSB0aGlzLml0ZW1zLmxlbmd0aCk7XHJcbiAgICBjb25zdCBzdGVwcyA9IHRoaXMuY3VycmVudEl0ZW1JbmRleCAtIGluZGV4O1xyXG4gICAgaWYgKHRoaXMuaW5maW5pdGUpIHtcclxuICAgICAgaWYgKHN0ZXBzID4gMCkge1xyXG4gICAgICAgIHRoaXMucm90YXRlUmlnaHRUbyh0aGlzLmN1cnJlbnRJdGVtSW5kZXgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHN0ZXBzIDwgMCkge1xyXG4gICAgICAgIHRoaXMucm90YXRlTGVmdFRvKHRoaXMuY3VycmVudEl0ZW1JbmRleCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLmVuYWJsZVRyYW5zaXRpb24oKTtcclxuICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XHJcbiAgICAgICAgaXRlbS5wb3NpdGlvbiArPSB0aGlzLl93aWR0aCAqIChzdGVwcyk7XHJcbiAgICAgICAgaXRlbS5jdXJyZW50UG9zaXRpb24gPSBpdGVtLnBvc2l0aW9uO1xyXG4gICAgICAgIGl0ZW0ubW92ZVRvKGl0ZW0ucG9zaXRpb24pO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5jdXJyZW50SXRlbUluZGV4ID0gKGluZGV4ICsgdGhpcy5pdGVtcy5sZW5ndGgpICUgdGhpcy5pdGVtcy5sZW5ndGg7XHJcbiAgICB9LCA1MCk7XHJcbiAgfVxyXG5cclxuICBzbGlkZUxlZnQoKSB7XHJcbiAgICBpZiAoIXRoaXMuaXNTbGlkaW5nKSB7XHJcbiAgICAgIHRoaXMuaXNTbGlkaW5nID0gdHJ1ZTtcclxuICAgICAgaWYgKCF0aGlzLmluZmluaXRlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEl0ZW1JbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgdGhpcy5zbGlkZVRvUHJldlBvc2l0aW9uKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2xpZGVUbyh0aGlzLmN1cnJlbnRJdGVtSW5kZXggLSAxKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pc1NsaWRpbmcgPSBmYWxzZTtcclxuICAgICAgfSwgdGhpcy5zcGVlZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzbGlkZVJpZ2h0KCkge1xyXG4gICAgaWYgKCF0aGlzLmlzU2xpZGluZykge1xyXG4gICAgICB0aGlzLmlzU2xpZGluZyA9IHRydWU7XHJcbiAgICAgIGlmICghdGhpcy5pbmZpbml0ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJdGVtSW5kZXggPT09IHRoaXMuaXRlbXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgdGhpcy5zbGlkZVRvUHJldlBvc2l0aW9uKCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2xpZGVUbyh0aGlzLmN1cnJlbnRJdGVtSW5kZXggKyAxKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pc1NsaWRpbmcgPSBmYWxzZTtcclxuICAgICAgfSwgdGhpcy5zcGVlZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzbGlkZVRvUHJldlBvc2l0aW9uKCkge1xyXG4gICAgdGhpcy5lbmFibGVUcmFuc2l0aW9uKCk7XHJcbiAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIGl0ZW0uY3VycmVudFBvc2l0aW9uID0gaXRlbS5wb3NpdGlvbjtcclxuICAgICAgaXRlbS5tb3ZlVG8oaXRlbS5wb3NpdGlvbik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVUcmFuc2l0aW9uKCkge1xyXG4gICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICBpdGVtLmRpc2FibGVUcmFuc2l0aW9uKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVRyYW5zaXRpb24oKSB7XHJcbiAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgIGl0ZW0uZW5hYmxlVHJhbnNpdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJdGVtQnlJbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pdGVtcy5maW5kKChpdGVtLCBpKSA9PiB7XHJcbiAgICAgIHJldHVybiBpID09PSBpbmRleDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5kZXhCeUl0ZW0oaXRlbTogVWlDYXJvdXNlbEl0ZW1Db21wb25lbnQpIHtcclxuICAgIHJldHVybiB0aGlzLml0ZW1zLnRvQXJyYXkoKS5pbmRleE9mKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgcm90YXRlUmlnaHROVGltZXMobjogbnVtYmVyKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICB0aGlzLnJvdGF0ZVJpZ2h0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByb3RhdGVMZWZ0TlRpbWVzKG46IG51bWJlcikge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgdGhpcy5yb3RhdGVMZWZ0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByb3RhdGVSaWdodCgpIHtcclxuICAgIGNvbnN0IGZpcnN0SXRlbVJlZiA9IHRoaXMuZ2V0SXRlbUJ5SW5kZXgodGhpcy5maXJzdEl0ZW1JbmRleCk7XHJcbiAgICBjb25zdCBsYXN0SXRlbVJlZiA9IHRoaXMuZ2V0SXRlbUJ5SW5kZXgodGhpcy5sYXN0SXRlbUluZGV4KTtcclxuXHJcbiAgICBpZiAoIXRoaXMuZmFkZSkge1xyXG4gICAgICBsYXN0SXRlbVJlZi5wb3NpdGlvbiA9IGZpcnN0SXRlbVJlZi5wb3NpdGlvbiAtIHRoaXMuX3dpZHRoO1xyXG4gICAgICBsYXN0SXRlbVJlZi5jdXJyZW50UG9zaXRpb24gPSBsYXN0SXRlbVJlZi5wb3NpdGlvbjtcclxuICAgICAgbGFzdEl0ZW1SZWYuZGlzYWJsZVRyYW5zaXRpb24oKTtcclxuICAgICAgbGFzdEl0ZW1SZWYubW92ZVRvKGxhc3RJdGVtUmVmLnBvc2l0aW9uKTtcclxuICAgICAgdGhpcy5maXJzdEl0ZW1JbmRleCA9IHRoaXMubGFzdEl0ZW1JbmRleDtcclxuICAgICAgdGhpcy5sYXN0SXRlbUluZGV4ID0gKHRoaXMubGFzdEl0ZW1JbmRleCAtIDEgKyB0aGlzLml0ZW1zLmxlbmd0aCkgJSB0aGlzLml0ZW1zLmxlbmd0aDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJvdGF0ZUxlZnQoKSB7XHJcbiAgICBjb25zdCBmaXJzdEl0ZW1SZWYgPSB0aGlzLmdldEl0ZW1CeUluZGV4KHRoaXMuZmlyc3RJdGVtSW5kZXgpO1xyXG4gICAgY29uc3QgbGFzdEl0ZW1SZWYgPSB0aGlzLmdldEl0ZW1CeUluZGV4KHRoaXMubGFzdEl0ZW1JbmRleCk7XHJcbiAgICBmaXJzdEl0ZW1SZWYucG9zaXRpb24gPSBsYXN0SXRlbVJlZi5wb3NpdGlvbiArIHRoaXMuX3dpZHRoO1xyXG4gICAgZmlyc3RJdGVtUmVmLmN1cnJlbnRQb3NpdGlvbiA9IGZpcnN0SXRlbVJlZi5wb3NpdGlvbjtcclxuICAgIGZpcnN0SXRlbVJlZi5kaXNhYmxlVHJhbnNpdGlvbigpO1xyXG4gICAgZmlyc3RJdGVtUmVmLm1vdmVUbyhmaXJzdEl0ZW1SZWYucG9zaXRpb24pO1xyXG4gICAgdGhpcy5sYXN0SXRlbUluZGV4ID0gdGhpcy5maXJzdEl0ZW1JbmRleDtcclxuICAgIHRoaXMuZmlyc3RJdGVtSW5kZXggPSAodGhpcy5sYXN0SXRlbUluZGV4ICsgMSkgJSB0aGlzLml0ZW1zLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIGZhZGVUbyhpbmRleDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLm9uQ2hhbmdlLmVtaXQoaW5kZXgpO1xyXG4gICAgY29uc3QgZmlyc3RJdGVtID0gdGhpcy5nZXRJdGVtQnlJbmRleCh0aGlzLmN1cnJlbnRJdGVtSW5kZXgpO1xyXG4gICAgY29uc3QgdGFyZ2V0SXRlbSA9IHRoaXMuZ2V0SXRlbUJ5SW5kZXgoaW5kZXgpO1xyXG4gICAgY29uc3QgaGlnaGVzdFpJbmRleCA9IHRoaXMuaXRlbXMubGVuZ3RoO1xyXG4gICAgdGFyZ2V0SXRlbS56SW5kZXggPSBmaXJzdEl0ZW0uekluZGV4ICsgMTtcclxuICAgIHRhcmdldEl0ZW0uc2V0ekluZGV4KHRhcmdldEl0ZW0uekluZGV4KTtcclxuICAgIHRhcmdldEl0ZW0uZGlzYWJsZVRyYW5zaXRpb24oKTtcclxuICAgIHRhcmdldEl0ZW0uZmFkZUluKHRoaXMuc3BlZWQpO1xyXG4gICAgdGhpcy5jdXJyZW50SXRlbUluZGV4ID0gaW5kZXg7XHJcbiAgfVxyXG5cclxuICBmYWRlUmlnaHQoKSB7XHJcbiAgICBjb25zdCBuZXdJbmRleCA9ICh0aGlzLmN1cnJlbnRJdGVtSW5kZXggKyAxKSAlIHRoaXMuaXRlbXMubGVuZ3RoO1xyXG4gICAgdGhpcy5mYWRlVG8obmV3SW5kZXgpO1xyXG4gICAgdGhpcy5jdXJyZW50SXRlbUluZGV4ID0gbmV3SW5kZXg7XHJcbiAgfVxyXG5cclxuICBmYWRlTGVmdCgpIHtcclxuICAgIGNvbnN0IG5ld0luZGV4ID0gKHRoaXMuY3VycmVudEl0ZW1JbmRleCAtIDEgKyB0aGlzLml0ZW1zLmxlbmd0aCkgJSB0aGlzLml0ZW1zLmxlbmd0aDtcclxuICAgIHRoaXMuZmFkZVRvKG5ld0luZGV4KTtcclxuICAgIHRoaXMuY3VycmVudEl0ZW1JbmRleCA9IG5ld0luZGV4O1xyXG4gIH1cclxuXHJcbiAgLy8gaXMgaXRlbSBmaXJzdCB2aXN1YWxseSBhbmQgbm90IG5lY2Vzc2FyeSBmaXJzdCBpbiB0aGUgZG9tIChRdWVyeUxpc3QpXHJcbiAgaXNJdGVtRmlyc3QoaW5kZXg6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIHRoaXMuZmlyc3RJdGVtSW5kZXggPT09IGluZGV4O1xyXG4gIH1cclxuXHJcbiAgLy8gaXMgaXRlbSBsYXN0IHZpc3VhbGx5IGFuZCBub3QgbmVjZXNzYXJ5IGxhc3QgaW4gdGhlIGRvbSAoUXVlcnlMaXN0KVxyXG4gIGlzSXRlbUxhc3QoaW5kZXg6IG51bWJlcikge1xyXG4gICAgcmV0dXJuIHRoaXMubGFzdEl0ZW1JbmRleCA9PT0gaW5kZXg7XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQnXSlcclxuICBvblJlc2l6ZShldmVudDogYW55KSB7XHJcbiAgICB0aGlzLnJlUG9zaXRpb24oKTtcclxuICB9XHJcblxyXG4gIHJlUG9zaXRpb24oKSB7XHJcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuaXRlbXMudG9BcnJheSgpO1xyXG5cclxuICAgIGlmICh0aGlzLml0ZW1zICYmIHRoaXMuaXRlbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLl93aWR0aCA9IHRoaXMuaXRlbXMuZmlyc3QuZWwubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBpdGVtcy5zb3J0KChpdGVtMSwgaXRlbTIpID0+IHtcclxuICAgICAgaWYgKGl0ZW0xLnBvc2l0aW9uID4gaXRlbTIucG9zaXRpb24pIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgICAgfSBlbHNlIGlmIChpdGVtMS5wb3NpdGlvbiA8IGl0ZW0yLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBjdXJyZW50SXRlbSA9IHRoaXMuZ2V0SXRlbUJ5SW5kZXgodGhpcy5jdXJyZW50SXRlbUluZGV4KTtcclxuICAgIGNvbnN0IGN1cnJlbnRJdGVtSW5kZXggPSBpdGVtcy5pbmRleE9mKGN1cnJlbnRJdGVtKTtcclxuICAgIGZvciAobGV0IGkgPSBjdXJyZW50SXRlbUluZGV4OyBpIDwgaXRlbXMubGVuZ3RoICsgY3VycmVudEl0ZW1JbmRleDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtc1soaSArIGl0ZW1zLmxlbmd0aCkgJSBpdGVtcy5sZW5ndGhdO1xyXG4gICAgICBpdGVtLnBvc2l0aW9uID0gKChpICsgaXRlbXMubGVuZ3RoKSAlIGl0ZW1zLmxlbmd0aCAtIGN1cnJlbnRJdGVtSW5kZXgpICogdGhpcy5fd2lkdGg7XHJcbiAgICAgIGl0ZW0uZGlzYWJsZVRyYW5zaXRpb24oKTtcclxuICAgICAgaXRlbS5tb3ZlVG8oaXRlbS5wb3NpdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhdXRvUGxheUZ1bmN0aW9uKHNob3VsZEF1dG9QbGF5OiBib29sZWFuKSB7XHJcbiAgICBpZiAodGhpcy5hdXRvUGxheSkge1xyXG4gICAgICBpZiAoc2hvdWxkQXV0b1BsYXkpIHtcclxuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5uZXh0KCk7XHJcbiAgICAgICAgfSwgdGhpcy5hdXRvUGxheVNwZWVkKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4iXX0=